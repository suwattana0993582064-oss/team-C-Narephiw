<script>
  // Music Control
  const music = document.getElementById('music');
  const btn = document.getElementById('music-control');
  btn.addEventListener('click', () => {
    if (music.paused) {
      music.play();
      btn.textContent = "⏸️ Pause Music";
    } else {
      music.pause();
      btn.textContent = "▶️ Play Music";
    }
  });

  // Parallax + Tilt
  document.addEventListener("mousemove", (e) => {
    const x = (e.clientX / window.innerWidth) * 20;
    const y = (e.clientY / window.innerHeight) * 20;
    document.body.style.backgroundPosition = `${50 - x}% ${50 - y}%`;

    const card = document.querySelector('.profile-card');
    const rotateX = y - 10;
    const rotateY = x - 10;
    card.style.transform = `scale(1) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
  });

  document.querySelector('.profile-card').addEventListener('mouseleave', () => {
    document.querySelector('.profile-card').style.transform = 'scale(1) rotateX(0deg) rotateY(0deg)';
  });

  // 🎇 Concert Light Beam Effect (wave-like)
  const canvas = document.getElementById('snow');
  const ctx = canvas.getContext('2d');
  let width = canvas.width = window.innerWidth;
  let height = canvas.height = window.innerHeight;

  const beams = [];
  const numBeams = 100;
  let frame = 0;

  for (let i = 0; i < numBeams; i++) {
    beams.push({
      x: Math.random() * width,
      y: height + Math.random() * 200,
      length: Math.random() * 150 + 100,
      angle: 0,
      width: Math.random() * 2 + 1,
      speed: Math.random() * 2 + 1,
      offset: Math.random() * 100,
      colorHue: Math.random() * 360
    });
  }

  function drawBeams() {
    ctx.clearRect(0, 0, width, height);
    beams.forEach(b => {
      const waveOffset = Math.sin((frame + b.offset) * 0.05) * 20;

      ctx.save();
      ctx.translate(b.x + waveOffset, b.y);
      ctx.beginPath();
      ctx.strokeStyle = `hsla(${(b.colorHue + frame) % 360}, 100%, 70%, 0.25)`;
      ctx.lineWidth = b.width;
      ctx.moveTo(0, 0);
      ctx.lineTo(0, -b.length);
      ctx.stroke();
      ctx.restore();

      b.y -= b.speed;

      if (b.y + b.length < 0) {
        b.y = height + Math.random() * 100;
        b.x = Math.random() * width;
        b.speed = Math.random() * 2 + 1;
        b.length = Math.random() * 150 + 100;
        b.colorHue = Math.random() * 360;
      }
    });
    frame++;
  }

  function animateBeams() {
    drawBeams();
    requestAnimationFrame(animateBeams);
  }

  animateBeams();

  window.addEventListener('resize', () => {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
  });
</script>
